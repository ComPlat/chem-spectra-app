<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="684px" preserveAspectRatio="none" style="width:910px;height:684px;background:#FFFFFF;" version="1.1" viewBox="0 0 910 684" width="910px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="343.5938" style="stroke:#000000;stroke-width:1.5;" width="893" x="10" y="242.8281"/><rect fill="none" height="193.9297" style="stroke:#000000;stroke-width:1.5;" width="873" x="20" y="385.4922"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="49" x2="49" y1="81.2969" y2="603.4219"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="252" x2="252" y1="81.2969" y2="603.4219"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="455" x2="455" y1="81.2969" y2="603.4219"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="606" x2="606" y1="81.2969" y2="603.4219"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="733" x2="733" y1="81.2969" y2="603.4219"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="844" x2="844" y1="81.2969" y2="603.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="30" y="77.9951">User</text><ellipse cx="49" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M49,21.5 L49,48.5 M36,29.5 L62,29.5 M49,48.5 L36,63.5 M49,48.5 L62,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="30" y="615.417">User</text><ellipse cx="49" cy="627.2188" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M49,635.2188 L49,662.2188 M36,643.2188 L62,643.2188 M49,662.2188 L36,677.2188 M49,662.2188 L62,677.2188 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="206" y="77.9951">InferenceAPI</text><path d="M231.5,37 L231.5,61 M231.5,49 L248.5,49 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="260.5" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="206" y="615.417">InferenceAPI</text><path d="M231.5,622.7188 L231.5,646.7188 M231.5,634.7188 L248.5,634.7188 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="260.5" cy="634.7188" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="393" y="77.9951">InferenceHandler</text><ellipse cx="455" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="451,37,457,32,455,37,457,42,451,37" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="393" y="615.417">InferenceHandler</text><ellipse cx="455" cy="634.7188" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="451,622.7188,457,617.7188,455,622.7188,457,627.7188,451,622.7188" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="551" y="77.9951">MoleculeModel</text><ellipse cx="606" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="594" x2="618" y1="63" y2="63"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="551" y="615.417">MoleculeModel</text><ellipse cx="606" cy="634.7188" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="594" x2="618" y1="648.7188" y2="648.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="671" y="77.9951">TranformerModel</text><ellipse cx="733" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="721" x2="745" y1="63" y2="63"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="671" y="615.417">TranformerModel</text><ellipse cx="733" cy="634.7188" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="721" x2="745" y1="648.7188" y2="648.7188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="805" y="77.9951">InferModel</text><ellipse cx="844" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="840,37,846,32,844,37,846,42,840,37" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="805" y="615.417">InferModel</text><ellipse cx="844" cy="634.7188" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="840,622.7188,846,617.7188,844,622.7188,846,627.7188,840,622.7188" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="240,93.2969,250,97.2969,240,101.2969,244,97.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="49" x2="246" y1="97.2969" y2="97.2969"/><polygon fill="#181818" points="443,107.2969,453,111.2969,443,115.2969,447,111.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="252" x2="449" y1="111.2969" y2="111.2969"/><polygon fill="#181818" points="594,136.4297,604,140.4297,594,144.4297,598,140.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="455" x2="600" y1="140.4297" y2="140.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="462" y="135.3638">get molecule model</text><polygon fill="#181818" points="466,165.5625,456,169.5625,466,173.5625,462,169.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="460" x2="605" y1="169.5625" y2="169.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="472" y="164.4966">molecule model</text><polygon fill="#181818" points="721,194.6953,731,198.6953,721,202.6953,725,198.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="455" x2="727" y1="198.6953" y2="198.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="462" y="193.6294">get transformer model</text><polygon fill="#181818" points="466,223.8281,456,227.8281,466,231.8281,462,227.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="460" x2="732" y1="227.8281" y2="227.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="472" y="222.7622">transformer model, error</text><path d="M10,242.8281 L74,242.8281 L74,249.9609 L64,259.9609 L10,259.9609 L10,242.8281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="343.5938" style="stroke:#000000;stroke-width:1.5;" width="893" x="10" y="242.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="25" y="255.895">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="101" x="89" y="255.0386">[invalid molfile]</text><polygon fill="#181818" points="466,277.0938,456,281.0938,466,285.0938,462,281.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="460" x2="732" y1="281.0938" y2="281.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="472" y="276.0278">json message invalid molfile</text><polygon fill="#181818" points="263,306.2266,253,310.2266,263,314.2266,259,310.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="257" x2="454" y1="310.2266" y2="310.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="269" y="305.1606">json message invalid molfile</text><polygon fill="#181818" points="60,335.3594,50,339.3594,60,343.3594,56,339.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="54" x2="251" y1="339.3594" y2="339.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="66" y="334.2935">json message invalid molfile</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="903" y1="348.3594" y2="348.3594"/><polygon fill="#181818" points="832,366.4922,842,370.4922,832,374.4922,836,370.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="455" x2="838" y1="370.4922" y2="370.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="462" y="365.4263">predict mass spectrum</text><path d="M20,385.4922 L84,385.4922 L84,392.625 L74,402.625 L20,402.625 L20,385.4922 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="193.9297" style="stroke:#000000;stroke-width:1.5;" width="873" x="20" y="385.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="35" y="398.5591">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="68" x="99" y="397.7026">[has error]</text><polygon fill="#181818" points="466,419.7578,456,423.7578,466,427.7578,462,423.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="460" x2="843" y1="423.7578" y2="423.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="472" y="418.6919">error</text><polygon fill="#181818" points="263,448.8906,253,452.8906,263,456.8906,259,452.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="257" x2="454" y1="452.8906" y2="452.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="269" y="447.8247">Error 400</text><polygon fill="#181818" points="60,478.0234,50,482.0234,60,486.0234,56,482.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="54" x2="251" y1="482.0234" y2="482.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="66" y="476.9575">Error 400</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="893" y1="491.0234" y2="491.0234"/><polygon fill="#181818" points="466,509.1563,456,513.1563,466,517.1563,462,513.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="460" x2="843" y1="513.1563" y2="513.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="472" y="508.0903">predicted data</text><polygon fill="#181818" points="263,538.2891,253,542.2891,263,546.2891,259,542.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="257" x2="454" y1="542.2891" y2="542.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="269" y="537.2231">predicted data</text><polygon fill="#181818" points="60,567.4219,50,571.4219,60,575.4219,56,571.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="54" x2="251" y1="571.4219" y2="571.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="66" y="566.356">predicted data</text><!--MD5=[51f1594b1097d6264d134015e4e4167b]
@startuml PredictMassSpectrum
' Endpoint: /predict/ms [POST]
' Endpoint: /api/v1/chemspectra/predict/ms [POST]

actor       User
boundary    InferenceAPI
control     InferenceHandler
entity      MoleculeModel
entity      TranformerModel
control     InferModel

User -> InferenceAPI
InferenceAPI -> InferenceHandler
InferenceHandler -> MoleculeModel: get molecule model
MoleculeModel - -> InferenceHandler: molecule model
InferenceHandler -> TranformerModel: get transformer model
TranformerModel - -> InferenceHandler: transformer model, error

alt invalid molfile
    TranformerModel - -> InferenceHandler: json message invalid molfile
    InferenceHandler - -> InferenceAPI: json message invalid molfile
    InferenceAPI - -> User: json message invalid molfile
else
    InferenceHandler -> InferModel: predict mass spectrum
    alt has error
        InferModel - -> InferenceHandler: error
        InferenceHandler - -> InferenceAPI: Error 400
        InferenceAPI - -> User: Error 400
    else
        InferModel - -> InferenceHandler: predicted data
        InferenceHandler - -> InferenceAPI: predicted data
        InferenceAPI - -> User: predicted data
    end
end




    

@enduml

@startuml PredictMassSpectrum

actor       User
boundary    InferenceAPI
control     InferenceHandler
entity      MoleculeModel
entity      TranformerModel
control     InferModel

User -> InferenceAPI
InferenceAPI -> InferenceHandler
InferenceHandler -> MoleculeModel: get molecule model
MoleculeModel - -> InferenceHandler: molecule model
InferenceHandler -> TranformerModel: get transformer model
TranformerModel - -> InferenceHandler: transformer model, error

alt invalid molfile
    TranformerModel - -> InferenceHandler: json message invalid molfile
    InferenceHandler - -> InferenceAPI: json message invalid molfile
    InferenceAPI - -> User: json message invalid molfile
else
    InferenceHandler -> InferModel: predict mass spectrum
    alt has error
        InferModel - -> InferenceHandler: error
        InferenceHandler - -> InferenceAPI: Error 400
        InferenceAPI - -> User: Error 400
    else
        InferModel - -> InferenceHandler: predicted data
        InferenceHandler - -> InferenceAPI: predicted data
        InferenceAPI - -> User: predicted data
    end
end




    

@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>